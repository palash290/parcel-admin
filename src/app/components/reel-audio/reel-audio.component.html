<div class="ct_px_30 ct_mt_30 pb-4">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="d-flex align-items-center justify-content-between mb-3 ct_flex_col_575 gap-3">
                    <h4 class="ct_fs_24 ct_fw_600 mb-0 ct_text_061F61 ct_ff_Saira">Reel Audio</h4>
                    <div class="d-flex align-items-center gap-2 ct_w_100_575">
                        <div class="ct_search ct_w_100_575">
                            <input type="text" class="form-control" placeholder="Search " [(ngModel)]="searchText"
                                (input)="filterTable()" />
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </div>
                        <div class="d-flex align-items-center gap-3 ct_w_100_767">
                            <button class="ct_blue_btn ct_dark_green_btn" data-bs-toggle="modal"
                                data-bs-target="#ct_add_modal">
                                Upload Audio
                            </button>
                        </div>
                    </div>
                </div>

                <!-- <h4 class="ct_fs_18 ct_fw_700 mb-3">Buyer</h4> -->
                <div class="table-responsive ct_custom_table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Song Name</th>
                                <th>Artist</th>
                                <th>Upload Date</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="filteredData.length == 0">
                                <td colspan="8" class="text-center">No audio found</td>
                            </tr>
                            <tr
                                *ngFor="let item of filteredData | paginate: { itemsPerPage: 10, currentPage: p }; let i = index">
                                <td>{{(p - 1) * 10 + i + 1}}</td>
                                <td>{{item.songName}}</td>
                                <td>{{item.artist}}</td>
                                <td>{{item.created_at | date:'dd-MMM-yyyy'}}</td>
                                <td>
                                    <label class="toggle-switch">
                                        <input type="checkbox" [(ngModel)]="item.is_user_banned"
                                            [ngModel]="item.is_active == false" (click)="handleCheckboxChange(item)">
                                        <div class="toggle-switch-background">
                                            <div class="toggle-switch-handle"></div>
                                        </div>
                                    </label>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center gap-3">
                                        <a class="ct_text_39A1FF" data-bs-toggle="modal" data-bs-target="#ct_view_modal"
                                            (click)="getDet(item)">
                                            <i class="fa-solid fa-eye"></i>
                                        </a>
                                        <a href="javascript:void(0)" class="text-danger" data-bs-toggle="modal"
                                            data-bs-target="#ct_delete_modal" (click)="getPostId(item.id)">
                                            <i class="fa-solid fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- (pageChange)="onPageChange($event)" -->
                <pagination-controls class="ct_pagination_div" *ngIf="!(data?.length == 0)"
                    (pageChange)="p = $event"></pagination-controls>
            </div>
        </div>
    </div>
</div>





<!-- Add Modal S -->
<div class="modal fade modal-md" id="ct_add_modal" tabindex="-1" aria-labelledby="ct_unlink_modalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <!-- <button type="button" class="btn-close ct_custom_close_img" data-bs-dismiss="modal"
                    aria-label="Close"></button> -->
                <div class="mb-0">
                    <h4 class="ct_fs_20 ct_fw_700 mb-1">Add Reel Audio</h4>
                </div>
            </div>

            <div class="modal-body ">
                <form [formGroup]="Form" class="ct_mt_10">

                    <div class="form-group mb-3">
                        <label for="" class="ct_fw_400 mb-2 ct_text_clr_151540 ct_fw_600 ">Song Name
                        </label>
                        <input type="text" class="form-control ct_input ct_border_grey" placeholder="Song Name"
                            formControlName="songname">
                        <span class="ct_text_red mt-2">{{validationErrorService.getErrorMessage('Song name',
                            Form.get('songname'))}}</span>
                    </div>

                    <div class="form-group mb-3">
                        <label for="" class="ct_fw_400 mb-2 ct_text_clr_151540 ct_fw_600 ">Artist Name
                        </label>
                        <input type="text" class="form-control ct_input ct_border_grey" placeholder="Artist Name"
                            formControlName="artistname">
                        <span class="ct_text_red mt-2">{{validationErrorService.getErrorMessage('Artist name',
                            Form.get('artistname'))}}</span>
                    </div>

                    <!-- <div class="d-flex align-items-center justify-content-center gap-3 mb-3 ct_flex_col_767">
                        <div class="d-flex align-items-center gap-4">
                            <div class="ct_upload_user_profile_img">
                                @if(audioUrl){
                                <audio *ngIf="audioUrl" controls class="custom-audio-player">
                                    <source [src]="audioUrl" type="audio/mp3">
                                    Your browser does not support the audio element.
                                </audio>
                                }

                                <label for="ct_upload_user_profile2" class="position-relative d-block mt-2">
                                    <input type="file" class="d-none" id="ct_upload_user_profile2"
                                        (change)="onAudioChange($event)" accept="audio/*" />
                                    <div class="ct_authore_banner_upload_icon_12">
                                        <i class="fa-solid fa-pencil"></i>
                                    </div>
                                    <div *ngIf="!audioUrl" class="ct_browse_btn mt-3">
                                        <span>Browse Files</span>
                                    </div>
                                    <div *ngIf="audioError" class="ct_text_red mt-2 text-center">
                                        {{ audioError }}
                                    </div>

                                </label>
                            </div>
                        </div>
                    </div> -->

                    <div class="ct_upload_product_main ct_upload_product_main_180 ">
                        <svg *ngIf="!audioUrl" width="33" height="33" viewBox="0 0 33 33" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M5.87174 22.0167C4.26376 20.9403 3.20508 19.1073 3.20508 17.027C3.20508 13.9023 5.59376 11.3354 8.64473 11.0528C9.26883 7.25653 12.5654 4.36035 16.5384 4.36035C20.5114 4.36035 23.808 7.25653 24.4321 11.0528C27.4831 11.3354 29.8717 13.9023 29.8717 17.027C29.8717 19.1073 28.8131 20.9403 27.2051 22.0167M11.2051 21.6937L16.5384 16.3604M16.5384 16.3604L21.8717 21.6937M16.5384 16.3604V28.3604"
                                stroke="#9CA3AF" stroke-width="2.66667" stroke-linecap="round" stroke-linejoin="round">
                            </path>
                        </svg>

                        <p *ngIf="!audioUrl" class="text-center ct_fs_18 ct_text_op_07 mb-0">Upload your audio
                            here</p>
                        <label for="ct_upload_user_profile2">
                            <input type="file" class="d-none" id="ct_upload_user_profile2"
                                (change)="onAudioChange($event)" accept="audio/*" />
                            <div *ngIf="!audioUrl" class="ct_browse_btn mt-3">
                                <span>Browse Files</span>
                            </div>
                        </label>

                        @if(audioUrl){
                        <audio *ngIf="audioUrl" controls class="custom-audio-player">
                            <source [src]="audioUrl" type="audio/mp3">
                            Your browser does not support the audio element.
                        </audio>
                        }

                    </div>

                    <div class="ct_single_uploaded_img mt-3 d-none">
                        <img src="user_3.png" alt="">
                        <i class="fa-solid fa-xmark"></i>
                    </div>

                    <div *ngIf="audioError" class="ct_text_red mt-2">
                        {{ audioError }}
                    </div>

                    <div class="mt-4">
                        <button type="button" class="ct_blue_btn text-center w-100" (click)="onSubmit()">
                            Save
                        </button>
                    </div>

                    <button hidden type="button" class="btn btn-secondary" #closeModal
                        data-bs-dismiss="modal">Close</button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Add Modal E -->

<!-- View Modal S -->
<div class="modal fade modal-md" id="ct_view_modal" tabindex="-1" aria-labelledby="ct_unlink_modalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <!-- <button type="button" class="btn-close ct_custom_close_img" data-bs-dismiss="modal"
                    aria-label="Close"></button> -->
                <div class="mb-0">
                    <h4 class="ct_fs_20 ct_fw_700 mb-1">Reel Audio Details</h4>
                </div>
            </div>
            <div class="modal-body ">
                <form class="ct_mt_10">

                    <div class="form-group mb-3">
                        <label for="" class="ct_fw_400 mb-2 ct_text_clr_151540 ct_fw_600 ">Song Name
                        </label>
                        <input type="text" class="form-control ct_input ct_border_grey" [value]="reelDet?.songName"
                            placeholder="Song Name" disabled>
                    </div>

                    <div class="form-group mb-3">
                        <label for="" class="ct_fw_400 mb-2 ct_text_clr_151540 ct_fw_600 ">Artist Name
                        </label>
                        <input type="text" class="form-control ct_input ct_border_grey" [value]="reelDet?.artist"
                            placeholder="Artist Name" disabled>

                    </div>

                    <div class="ct_upload_product_main ct_upload_product_main_180 ">
                        <audio *ngIf="reelDet?.audio" controls class="custom-audio-player">
                            <source [src]="reelDet?.audio" type="audio/mp3">
                            Your browser does not support the audio element.
                        </audio>
                    </div>

                    <div class="mt-4">
                        <button type="button" class="ct_blue_btn text-center w-100" data-bs-dismiss="modal"
                            aria-label="Close">
                            Close
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- View Modal E -->

<!-- Delete Modal S -->
<div class="modal fade modal-md" id="ct_delete_modal" tabindex="-1" aria-labelledby="ct_unlink_modalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <!-- <h5 class="modal-title ct_fs_24 ct_ff_QuattrocentoSans ct_fw_700 mb-0"
                            id="ct_unlink_modalLabel">
                            Image Preview
                        </h5> -->
                <button type="button" class="btn-close ct_custom_close_img" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class=" mx-auto mb-4">
                    <svg width="49" height="54" viewBox="0 0 49 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_1_8145)">
                            <mask id="mask0_1_8145" style="mask-type: luminance" maskUnits="userSpaceOnUse" x="0" y="3"
                                width="49" height="48">
                                <path d="M48.5 3H0.5V51H48.5V3Z" fill="white" />
                            </mask>
                            <g mask="url(#mask0_1_8145)">
                                <path
                                    d="M24.4972 7.03125C25.9072 7.09378 26.98 7.71878 27.7156 8.90625L47.5777 43.4062C48.1907 44.6562 48.1907 45.9062 47.5777 47.1562C46.8421 48.3438 45.7693 48.9688 44.3593 49.0312H4.63519C3.22523 48.9688 2.15243 48.3438 1.4168 47.1562C0.803775 45.9062 0.803775 44.6562 1.4168 43.4062L21.3708 8.90625C22.1064 7.71878 23.1486 7.09378 24.4972 7.03125ZM24.4972 19.0312C23.1486 19.1562 22.4129 19.9062 22.2903 21.2812V31.7812C22.4129 33.1562 23.1486 33.9062 24.4972 34.0312C25.8459 33.9062 26.5815 33.1562 26.7041 31.7812V21.2812C26.5815 19.9062 25.8459 19.1562 24.4972 19.0312ZM27.4398 40.0312C27.4398 39.1562 27.164 38.4375 26.6122 37.875C26.0605 37.3125 25.3555 37.0312 24.4972 37.0312C23.639 37.0312 22.9341 37.3125 22.3823 37.875C21.8306 38.4375 21.5547 39.1562 21.5547 40.0312C21.5547 40.9062 21.8306 41.625 22.3823 42.1875C22.9341 42.75 23.639 43.0312 24.4972 43.0312C25.3555 43.0312 26.0605 42.75 26.6122 42.1875C27.164 41.625 27.4398 40.9062 27.4398 40.0312Z"
                                    fill="#FF0000" />
                            </g>
                        </g>
                        <defs>
                            <clipPath id="clip0_1_8145">
                                <rect width="48" height="53.3335" fill="white" transform="translate(0.5 0.333984)" />
                            </clipPath>
                        </defs>
                    </svg>
                </div>
                <h4 class="ct_fs_20 ct_fw_600 ct_text_061F61">
                    Delete Audio?
                </h4>
                <p class="mb-0  ct_text_666">Are you sure you want to delete this audio? This action cannot be undone.
                </p>
                <div class="d-flex align-items-center gap-3 mt-4 justify-content-center">
                    <button class="ct_outline_btn px-5 py-2 w-100 ct_fw_600" data-bs-dismiss="modal">Cancel</button>
                    <button class="ct_dark_green_btn px-5 py-2 w-100 ct_fw_600" (click)="deletePost()">Yes</button>
                </div>

                <button hidden type="button" class="btn btn-secondary" #closeModalDelete
                    data-bs-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>
<!-- Delete Modal E -->

<div class="ct_loader_main" *ngIf="isLoading">
    <span class="loader"></span>
</div>